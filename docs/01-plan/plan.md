# 기획서 (Plan Document)
## 제갈량의 천기누설 (Master Zhuge's Strategy)

> 작성일: 2026-02-17 (역추적 작성)
> 상태: 완료 (구현 후 역방향 문서화)

---

## 1. 프로젝트 개요

### 1.1 프로젝트명
**제갈량의 천기누설 (Master Zhuge's Strategy)**

### 1.2 프로젝트 목적
삼국지의 전략가 제갈량(诸葛亮)을 테마로 한 AI 기반 프리미엄 운세 분석 웹 애플리케이션. 사주(四柱), 서양 점성술, 수비학 세 가지 체계를 통합하여 개인 맞춤형 전략 분석을 제공한다.

### 1.3 핵심 가치
- **동서양 융합**: 사주팔자 + 서양 점성술 + 수비학을 하나의 분석으로 결합
- **전략적 관점**: 단순 운세가 아닌, 제갈량식 전략 조언 제공
- **프리미엄 경험**: 신비로운 다크 테마와 애니메이션으로 몰입감 있는 UX

---

## 2. 타겟 사용자

| 구분 | 설명 |
|------|------|
| 주요 타겟 | 20~40대 한국어 사용자 |
| 사용 목적 | 2026년 커리어/재정 운세 확인 및 인생 황금기 파악 |
| 사용 환경 | 모바일/데스크톱 웹 브라우저 |

---

## 3. 핵심 기능 요구사항

### 3.1 사용자 입력 (User Input)
| 항목 | 필수 여부 | 설명 |
|------|-----------|------|
| 이름 | 필수 | 한글 이름 |
| 성별 | 필수 | 남성/여성 토글 선택 |
| 생년월일 | 필수 | Date Picker (YYYY-MM-DD) |
| 출생 시간 | 선택 | HH:MM 또는 "모름" 체크 |
| 출생 장소 | 필수 | 텍스트 입력 |

### 3.2 2026년 운세 분석
- 사주, 점성술, 수비학 각 0~100점 스코어
- 종합 점수 (가중 평균)
- 기회 요인 (Opportunity) 분석
- 리스크 요인 (Risk) 분석
- 제갈량의 전략적 조언 (Strategy)

### 3.3 황금기 Top 5 (Golden Era)
- 20세~60세 범위 내 인생 최고의 5년 선정
- 연도별 세 가지 체계(사주/점성술/수비학) 점수
- 집중 분야 태그 (Money / Career)
- 연도별 상세 설명 및 전략 조언
- Recharts 막대 차트 시각화

### 3.4 결과 공유
- 클립보드 복사 기능
- 이메일 공유 (mailto 링크)

---

## 4. 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 언어 | 한국어 전용 |
| 반응형 | 모바일/데스크톱 대응 |
| 보안 | API 키 서버 사이드 보관 (Supabase Edge Function) |
| 성능 | AI 응답 대기 중 로딩 애니메이션 제공 |
| 접근성 | 다크 테마 기반, 시각적 계층 구조 |

---

## 5. 기술 스택 선정

| 레이어 | 기술 | 선정 이유 |
|--------|------|-----------|
| 프론트엔드 | React 19 + TypeScript | 최신 React, 타입 안전성 |
| 빌드 도구 | Vite 6 | 빠른 HMR, 간편한 설정 |
| 스타일링 | Tailwind CSS (CDN) | 유틸리티 퍼스트, 빠른 프로토타이핑 |
| 차트 | Recharts | React 네이티브 차트 라이브러리 |
| 폰트 | Noto Serif KR + Pretendard | 고급스러운 한국어 서체 |
| 백엔드 | Supabase Edge Functions (Deno) | 서버리스, API 키 보호 |
| AI 모델 | Claude Sonnet 4.5 | 고품질 한국어 텍스트 생성 |
| 배포 | Vercel + Supabase | 무료 티어 활용 가능 |

---

## 6. 아키텍처 개요

```
[사용자 브라우저]
    ↓ HTTPS
[Vercel - 정적 프론트엔드]
    ↓ POST /functions/v1/analyze
[Supabase Edge Function]
    ↓ Anthropic Messages API
[Claude Sonnet 4.5]
    ↓ JSON Response
[Supabase Edge Function]
    ↓ JSON
[프론트엔드 렌더링]
```

---

## 7. 사용자 플로우

```
Welcome → 이름 입력 → 성별/생년월일 → 출생시간/장소
    → 로딩 화면 (AI 분석 중)
    → 결과 대시보드 (2026 운세 + 황금기 Top 5)
    → 공유 (클립보드/이메일)
    → 다시 분석하기
```

---

## 8. 마일스톤

| 단계 | 내용 | 상태 |
|------|------|------|
| M1 | 프로젝트 초기 설정 (Vite + React + TS) | ✅ 완료 |
| M2 | 사용자 입력 폼 (4단계 위자드) | ✅ 완료 |
| M3 | Supabase Edge Function + Claude API 연동 | ✅ 완료 |
| M4 | 결과 대시보드 UI (차트 포함) | ✅ 완료 |
| M5 | 로딩 화면 애니메이션 | ✅ 완료 |
| M6 | 공유 기능 (클립보드/이메일) | ✅ 완료 |
| M7 | 배포 (Vercel + Supabase) | ⬜ 미정 |

---

## 9. 리스크 및 대응

| 리스크 | 대응 방안 |
|--------|-----------|
| AI 응답 시간 지연 | 몰입감 있는 로딩 화면으로 체감 대기 시간 감소 |
| AI 응답 JSON 파싱 실패 | 마크다운 코드 펜스 제거 로직 적용 |
| API 키 노출 위험 | Supabase Edge Function으로 서버 사이드 처리 |
| 출생 시간 미제공 | 삼주추명(3주) 방식으로 대체 분석 지원 |
